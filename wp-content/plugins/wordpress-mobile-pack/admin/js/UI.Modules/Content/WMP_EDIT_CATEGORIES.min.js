function WMP_EDIT_CATEGORIES(){var e=this;this.type="wmp_editcategories",this.form,this.DOMDoc,this.changingStatus=!1,this.init=function(){WMPJSInterface=window.parent.WMPJSInterface,this.form=this.DOMDoc.getElementById(this.type+"_form"),null!=this.form&&(this.initCategories(),this.initListActions())},this.initListActions=function(){jQuery("ul.categories",this.form).sortable({update:function(t,a){e.changeOrder()}}),this.update()},this.initCategories=function(){jQuery("li div.row",this.form).on("click",function(){if(confirm("Are you sure you want to change the status for this category?")){var t,a=jQuery(".status",this),r=jQuery(this).parent().attr("data-category-id");t=0==a.hasClass("active")?"active":"inactive",0==e.changingStatus&&(WMPJSInterface.Preloader.start(),jQuery.post(ajaxurl,{action:"wmp_content_status",id:r,status:t,type:"category"},function(r){if(e.changingStatus=!1,WMPJSInterface.Preloader.remove(100),1==(r=Boolean(Number(String(r))))){a.addClass(t),a.removeClass("active"==t?"inactive":"active"),a.text(t);var i="The status of this category has been changed.";WMPJSInterface.Loader.display({message:i}),jQuery("li span.active",e.form).length>0?jQuery("#"+e.type+"_warning",e.DOMDoc).hide():jQuery("#"+e.type+"_warning",e.DOMDoc).show()}else{i="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:i})}}))}}),jQuery("#"+e.type+"_warning a.close-x",this.form).on("click",function(){jQuery("#"+e.type+"_warning",e.DOMDoc).hide()})},this.changeOrder=function(){if(1!=e.changingStatus){var t="";jQuery("ul.categories li",e.form).each(function(e,a){t+=jQuery(this).attr("data-category-id")+",";var r=e+1;jQuery(this).attr("data-order",r)}),WMPJSInterface.Preloader.start(),e.changingStatus=!0,jQuery.post(ajaxurl,{action:"wmp_content_order",type:"categories",ids:t},function(t){if(WMPJSInterface.Preloader.remove(100),e.changingStatus=!1,1==(t=Boolean(Number(String(t))))){var a="The order of the categories has been successfully changed.";WMPJSInterface.Loader.display({message:a})}else{a="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";WMPJSInterface.Loader.display({message:a})}})}},this.update=function(){jQuery("ul.categories li",this.form).length>1?jQuery("ul.categories",e.form).sortable("enable"):jQuery("ul.categories",e.form).sortable("disable")}}